(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{385:function(e,t,a){"use strict";a.r(t);var s=a(46),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployment"}},[e._v("#")]),e._v(" Deployment")]),e._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#deployment-view"}},[e._v("Deployment View")]),a("ul",[a("li",[a("a",{attrs:{href:"#configuration"}},[e._v("Configuration")])])])])])]),a("p"),e._v(" "),a("h2",{attrs:{id:"deployment-view"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployment-view"}},[e._v("#")]),e._v(" Deployment View")]),e._v(" "),a("p",[e._v("This system follows a distributed architectural. At the moment, we host all applications in a single Virtual Machine.")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/views/deployment.svg"),alt:"Deployment View"}}),e._v(" "),a("p",[e._v("Each application is represented as a deployment unit:")]),e._v(" "),a("ul",[a("li",[e._v("The application itself;")]),e._v(" "),a("li",[e._v("Its corresponding configurations.")])]),e._v(" "),a("p",[e._v("The Caddy server acts as a gateway, placed on the edge of the VM. Its role is to redirect requests to the corresponding application.")]),e._v(" "),a("p",[e._v("The backend recovers data from Google Spreadsheets and stores it in the database application as a local cache. It exposes an API to be consumed by the frontend.")]),e._v(" "),a("h3",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),a("p",[e._v("This topic shows how to configurate all the application contexts")]),e._v(" "),a("h4",{attrs:{id:"front-end"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#front-end"}},[e._v("#")]),e._v(" Front End")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v(".env")]),e._v(" file, in the root of the application, configures all the environments variables.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sheetsAPIKey=\nGOOGLE_ANALYTICS_ID=\nBACKEND_URL=\n")])])]),a("h4",{attrs:{id:"back-end"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#back-end"}},[e._v("#")]),e._v(" Back End")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v(".env")]),e._v(" file, in the root of the application, configures all the environments variables.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# App Context\ngoogle_sheets_API_key=\n\nCOMPANY_TAB_NAME=\nCOMPANY_SHEET_ID=\n\nDISCIPLINE_TAB_NAME=\nDISCIPLINE_SHEET_ID=\n\nPATENT_TAB_NAME=\nPATENT_SHEET_ID=\n\n# Rails Context\nMONGO_INITDB_DATABASE=\nCORS_ALLOWED_ORIGIN=\nRAILS_ENV=production\n")])])]),a("h4",{attrs:{id:"database"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#database"}},[e._v("#")]),e._v(" DataBase")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v(".env")]),e._v(" file, in the root of the application, configures all the environments variables.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("MONGO_INITDB_DATABASE=\n")])])]),a("h4",{attrs:{id:"reverse-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reverse-proxy"}},[e._v("#")]),e._v(" Reverse proxy")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("Caddyfile")]),e._v(" file makes all the "),a("a",{attrs:{href:"https://caddyserver.com/docs/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Caddy"),a("OutboundLink")],1),e._v(" configuration.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("hubuspinovacao.if.usp.br\n\nhandle_path /api/* {\n    uri strip_prefix /api\n    reverse_proxy localhost:3001\n}\n\nreverse_proxy /* localhost:3000\n")])])]),a("p",[a("RouterLink",{attrs:{to:"/"}},[e._v("⬅️ Go back")])],1)])}),[],!1,null,null,null);t.default=n.exports}}]);